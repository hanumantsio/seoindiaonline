<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title id="titleTag">Post</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="https://seoindiaonline.com/wp-content/uploads/2025/04/logo.png">
<link rel="canonical" id="canonicalLink">
<script type="application/ld+json" id="articleSchema"></script>
</head>

<body>
<h1 id="postTitle"></h1>
<div id="meta"></div>
<div id="postContent"></div>

<script type="module">
import { db } from "./firebase.js";
import {
  collection, query, where, getDocs
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const slug=new URLSearchParams(location.search).get("slug");
if(!slug){document.body.innerHTML="Invalid post";throw "";}

const q=query(collection(db,"posts"),where("slug","==",slug));
const s=await getDocs(q);
if(s.empty){document.body.innerHTML="Post not found";throw "";}

const p=s.docs[0].data();
const date=p.createdAt?.toDate();

postTitle.textContent=p.title;
postContent.innerHTML=p.content;
meta.textContent=`Author: ${p.authorName} | Date: ${date?.toLocaleDateString()}`;

titleTag.textContent=`${p.title} | SEO India Online Free Blog`;
canonicalLink.href=`https://hanumantsio.github.io/seoindiaonline/post/${p.slug}`;

/* Article Schema */
articleSchema.textContent=JSON.stringify({
 "@context":"https://schema.org",
 "@type":"Article",
 "mainEntityOfPage":{"@type":"WebPage","@id":canonicalLink.href},
 "headline":p.title,
 "description":p.content.replace(/<[^>]+>/g,"").substring(0,160),
 "author":{"@type":"Person","name":p.authorName},
 "publisher":{
   "@type":"Organization",
   "name":"SEO India Online Free Blog",
   "logo":{"@type":"ImageObject","url":"https://seoindiaonline.com/wp-content/uploads/2025/04/logo.png"}
 },
 "datePublished":date?.toISOString(),
 "dateModified":date?.toISOString()
});
</script>
</body>
</html>
