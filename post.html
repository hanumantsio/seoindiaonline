<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Post</title>
<meta name="robots" content="index,follow">
<link rel="canonical" id="canonicalLink">
<script type="application/ld+json" id="blogSchema"></script>
<script type="application/ld+json" id="breadcrumbSchema"></script>
</head>
<body>

<nav><a href="/">Home</a></nav>

<article>
 <nav><a href="/">Home</a> › <span id="crumb"></span></nav>
 <h1 id="title"></h1>
 <p id="meta"></p>
 <div id="content"></div>
</article>

<script type="module">
import { db } from "../firebase.js";
import { collection, query, where, getDocs }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const slug=location.pathname.split("/post/")[1];
const q=query(collection(db,"posts"),where("slug","==",slug));
const snap=await getDocs(q);
if(snap.empty)document.body.innerHTML="Not found";

const p=snap.docs[0].data();
title.textContent=p.title;
crumb.textContent=p.title;
content.innerHTML=p.content;

const ADMIN="hanumant.seoindiaonline@gmail.com";
const author=p.authorEmail===ADMIN?"Hanumant Kumar":`${p.authorName} (Guest)`;
meta.textContent=`By ${author} · ${new Date(p.createdAt).toDateString()}`;

const url=location.origin+"/post/"+p.slug;
canonicalLink.href=url;

blogSchema.textContent=JSON.stringify({
 "@context":"https://schema.org",
 "@type":"BlogPosting",
 "headline":p.title,
 "author":{"@type":"Person","name":author},
 "publisher":{"@type":"Organization","name":"SEO India Online Free Blog"},
 "datePublished":p.createdAt,
 "url":url
});

breadcrumbSchema.textContent=JSON.stringify({
 "@context":"https://schema.org",
 "@type":"BreadcrumbList",
 "itemListElement":[
  {"@type":"ListItem","position":1,"name":"Home","item":location.origin},
  {"@type":"ListItem","position":2,"name":p.title,"item":url}
 ]
});
</script>

</body>
</html>
