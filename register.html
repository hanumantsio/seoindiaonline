<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Register</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>

<h2>Register</h2>
<div id="error" style="color:red"></div>

<input id="name" placeholder="Full Name *"><br>
<input id="email" type="email" placeholder="Email *"><br>
<input id="password" type="password" placeholder="Password *"><br>
<button id="registerBtn">Register</button>

<script type="module">
import { auth, db } from "./firebase.js";
import { createUserWithEmailAndPassword, updateProfile }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
import { setDoc, doc, serverTimestamp }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

registerBtn.onclick = async () => {
 if(!name.value.trim()) return error.textContent="Full name required";

 const cred = await createUserWithEmailAndPassword(
   auth,email.value,password.value
 );
 await updateProfile(cred.user,{displayName:name.value.trim()});
 await setDoc(doc(db,"users",cred.user.uid),{
  name:name.value.trim(),
  email:email.value,
  createdAt:serverTimestamp()
 });
 await cred.user.reload();
 location.href="submit-post.html";
};
</script>
</body>
</html>
