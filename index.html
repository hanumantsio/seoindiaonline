<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SEO India Online Free Blog</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>

<nav>
  <a href="index.html">Home</a>
  <a href="posts.html">Posts</a>
  <a href="submit-post.html" id="submitLink" style="display:none">Submit</a>
  <span id="authLinks">
    <a href="login.html" id="loginLink">Login</a>
    <a href="register.html" id="registerLink">Register</a>
  </span>
  <button id="logoutBtn" style="display:none">Logout</button>
</nav>

<h1>SEO India Online Free Blog</h1>
<p>
Author: <strong>Hanumant Kumar</strong><br>
SEO Executive at <a href="https://seoindiaonline.com">SEO India Online</a>
</p>

<div id="posts">Loading postsâ€¦</div>

<script type="module">
import { db } from "./firebase.js";
import { collection, getDocs, query, orderBy }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const q = query(collection(db,"posts"), orderBy("createdAt","desc"));
const snap = await getDocs(q);

posts.innerHTML = "";
snap.forEach(d=>{
 const p=d.data();
 if(!p.slug) return;
 posts.innerHTML += `<h3><a href="post.html?slug=${p.slug}">${p.title}</a></h3>`;
});
</script>

<!-- AUTH UI -->
<script type="module">
import { auth } from "./firebase.js";
import { onAuthStateChanged, signOut }
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

onAuthStateChanged(auth,user=>{
 logoutBtn.style.display=user?"inline":"none";
 submitLink.style.display=user?"inline":"none";
 loginLink.style.display=user?"none":"inline";
 registerLink.style.display=user?"none":"inline";
});

logoutBtn.onclick=async()=>{
 await signOut(auth);
 location.href="index.html";
};
</script>

</body>
</html>
